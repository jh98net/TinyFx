{
  "Project": {
    "ProjectId": "Demo.WebAPI",
    "Description": "Demo.WebAPI项目",
    "ConsoleLogLevel": "Debug",
    "MinThreads": 0,
    "ResponseErrorMessage": true,
    "ResponseErrorDetail": true,
    "IsDebugEnvironment": true,
    "Environment": null //当前环境:local,dev,fat(qa),uat(staging),pro(prod)
  },

  "Host": {
    "HeartbeatInterval": 5000, //主机注册心跳间隔，默认5秒, 0-无心跳
    "HeathInterval": 600000, //主机检查间隔，默认10分钟, 0-无检查
    "DataExpire": 15000, //主机数据有效期，默认15秒,0-10分钟
    "TimerMinDelay": 200, //主机Timer最小Delay时间, 0-无Timer
    "TimerWaitTimeout": 20000 //主机Timer关闭等待超时
  },

  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
    "MinimumLevel": {
      "Default": "Verbose", // 日志级别限制：Verbose|Debug|Information|Warning|Error|Fatal
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": {
      "ConsoleSink": {
        "Name": "Console",
        "Args": {
          "restrictedToMinimumLevel": "Debug", // 日志级别
          "theme": "Serilog.Sinks.SystemConsole.Themes.AnsiConsoleTheme::Code, Serilog.Sinks.Console",
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      },
      "FileSink": {
        "Name": "File",
        "Args": {
          "path": "./logs/log.txt",
          "rollingInterval ": "Day", // 滚动文件名生成策略。如：log20190101.txt
          "restrictedToMinimumLevel": "Information", // 日志级别
          "rollOnFileSizeLimit": true, //开启大小限制
          "fileSizeLimitBytes": 10000000, //文件大小限制
          "retainedFileCountLimit": 7, // 文件保留数限制,不限制 = null
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      },
      "ELKSink": {
        "Name": "TinyFxELK",
        "Args": {
          "restrictedToMinimumLevel": "Debug",
          "nodeUris": "http://192.168.1.120:9200",
          "autoRegisterTemplate": true,
          "autoRegisterTemplateVersion": "ESv7",
          "batchPostingLimit": 1
        }
      }
    },
    "Enrich": [],
    "Destructure": [],
    "Filter": [],
    "Properties": {}
  },
  "SqlSugar": {
    "Enabled": true,
    "DbConfigProvider": null,
    "DbRoutingProvider": null,
    "DefaultConnectionStringName": "default",
    "ConnectionStrings": {
      "default": {
        "DbType": "MySql",
        "ConnectionString": "server=192.168.1.120;port=3306;database=ing;uid=root;pwd=root;sslmode=Disabled;allowuservariables=True;AllowLoadLocalInfile=true;Pooling=false",
        "LogEnabled": true,
        "LogSqlMode": 2,
        "SlaveEnabled": false
      },
      "game": {
        "DbType": "MySql",
        "ConnectionString": "server=192.168.1.120;port=3306;database=gdb;uid=root;pwd=root;sslmode=Disabled;allowuservariables=True;AllowLoadLocalInfile=true;Pooling=false",
        "LogEnabled": true,
        "LogSqlMode": 2,
        "SlaveEnabled": false
      }
    }
  },

  "Redis": {
    "DefaultConnectionStringName": "default",
    "RunNewTaskWhenSync": false,
    "ConnectionStrings": {
      "default": {
        "ConnectionString": "192.168.1.120:6379,password=root,defaultDatabase=0,keepAlive=-1",
        "SerializeMode": "json",
        "NamespaceMap": ""
      }
    },
    "ConsumerAssemblies": []
  },
  "RabbitMQ": {
    "Enabled": true,
    "LogEnabled": true,
    "SACBindDelay": 120,
    "RedisConnectionStringName": "default",
    "DefaultConnectionStringName": "default",
    "ConnectionStrings": {
      "default": {
        "UseShortNaming": false,
        "UseEnvironmentVirtualHost": false,
        "UseQuorum": false,
        "ConnectionString": "host=192.168.1.120:5672;username=root;password=root;publisherConfirms=true;timeout=60"
      }
    },
    "ConsumerAssemblies": []
  },
  "DbCaching": {
    "Enabled": true,
    "PublishMode": "Redis",
    "RedisConnectionStringName": "default",
    "MQConnectionStringName": "default",
    "RefleshTables": []
  },

  "AutoMapper": {
    "Assemblies": [ "Demo.WebAPI.dll" ] // 需要自动注册的dll名称,+开头不存在不异常
  },

  "JwtAuth": {
    "Enabled": true, //是否起效
    "DebugToken": "", // Debug时的Token（仅Development或Testing时有效，用于设置默认swagger的jwt）
    "SignSecret": "xxxxx_xxxxx",
    "DynamicSignSecret": false,
    "EncryptSecret": "",
    "Issuer": "tinyfx.com",
    "Audience": "tinyfx.com",
    "ValidateLifetime": false, //是否验证过期
    "ExpireMinutes": 30 // Token过期时间（分钟）,一年525600
  },

  // 雪花ID TinyFx.IDGenerator
  "IDGenerator": {
    "Enabled": true,
    "UseRedis": true,
    "RedisConnectionStringName": "default",
    "RedisExpireSeconds": 600, //过期时间
    "DataCenterId": 0, // 数据中心ID（范围0-7）
    "WorkerId": 0, //机器码(范围0-1023) UseRedis二选一
    "WorkerIdBits": 10 // 机器码位长度（默认10 => 1023）
  },
  "IP2Country": {
    "Enabled": true,
    "DbIpSource": null, //IP库：https://db-ip.com/db/download/ip-to-country-lite
    "AllowIps": "" //允许的IP,分割 * 全部允许
  },

  // #region ******** Asp.Net ********
  // Asp.Net配置
  "AspNet": {
    "UseRequestBuffering": true, // 是否缓存Request.Body，如果不需要读取Body设置为false
    "UseApiActionResultFilter": true, // 是否使用ApiActionResultFilter(返回统一结构 TinyFx.AspNet.ApiResult)
    "UseModelStateInvalid": true, // 是否使用ValidateModelFilter（屏蔽[ApiController]的自动 400 响应）
    "UseResponseCompression": false, // 是否启用压缩br,gzip
    "UseApiVersioning": true, // 是否开启版本控制
    "RequestPeriodSecond": 15, //请求宽限期（秒）
    "RequestBytesPerSecond": 100, //请求每秒字节限制
    "Swagger": {
      "Enabled": true,
      "UseSchemaFullName": false //生成接口用到的类型信息时，是否使用带命名空间的全名称，以避免重名异常
    },
    "PathBase": null, // 项目基础路径
    "HostingStartupAssemblies": [], //启动时host配置assembly，继承ITinyFxHostingStartup
    "DynamicApiAssemblies": [] // 动态加载的API所在的 xxx.dll
  },

  // 请求日志配置
  "RequestLogging": {
    "Enabled": true,
    "LogLevel": "Debug",
    "CustomeExceptionLevel": "Information",
    "LogRequestHeaders": false,
    "LogRequestBody": true,
    "LogResponseBody": false,
    "Urls": [ "*" ] //*表示记录全部
  },

  // 启用Session或者Cookie Identity (TinyFx.AspNet.Configuration.SessionAndCookieSection)
  "SessionAndCookie": {
    "ApplicationName": "tinyfx", // 默认ProjectId，如需跨应用共享session或cookie，需设置相同值
    "RedisConnectionStringName": null, // redis连接字符串名，对应配置：Redis:ConnectionStrings:Name
    "UseCookieIdentity": true,
    "CookieTimeout": 3, // cookie过期时间3天
    "Domain": null, // cookie和session保存的domain，跨域如: .xxyy.com
    "SameSiteMode": "Unspecified", // https使用None，其他Unspecified
    "UseSession": false,
    "SessionTimeout": 20 // Session过期时间,20分钟
  },

  // Asp.net core CORS跨域请求配置 (TinyFx.AspNet.Configuration.CorsSection)
  "Cors": {
    "UseCors": {
      "Enabled": true,
      "EnabledReferer": false,
      "PoliciesProvider": "", //策略提供程序: TinyFx.AspNet.ICorsPoliciesProvider
      "DefaultPolicy": null
    },
    "Policies": {
      "default": {
        "Origins": "*", // 允许的来源,分号;分隔（下同）
        "Methods": "*", // 允许的HTTP方法
        "Headers": "*", // 允许的请求标头
        "MaxAge": 86400 // Access-Control-Max-Age 时间(秒)
      }
    }
  },

  // #endregion ******** Asp.Net ********

  "AllowedHosts": "*"
}
